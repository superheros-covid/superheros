<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>SuperHeros</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/fonts/stylesheet.css">
    <link rel="stylesheet" href="/css/style.css">
  <style>
  </style>
</head>
<body data-team="blue">
  <div class="main">

  </div>
  <template style="display: none" id="home">
    <header>
      <img src="/img/logo.png" alt="Logo" class="sh-logo">
    </header>

    <span class="home-subtext text-center">
        #restezchezvous peut sauver des vies
    </span>

    <div class="sh-actions">
      <a href="#register" class="sh-btn btn-red">Démarrer</a>
    </div>

    <footer><img src="/img/bg.png" class="sh-background full-size"></footer>
  </template>
  <template style="display: none" id="notFound">
    <header>
      <img src="/img/logo.png" alt="Logo" class="sh-logo">
    </header>

    <div class="sh-actions">
      <h3>Not found</h3>
    </div>
  </template>
  <template style="display: none" id="register">
    <header>
        <h1 class="text-blue">Création<br>de votre profil</h1>
    </header>

    <div class="sh-form">
      <input type="text" placeholder="Nom de héros" name="heroName">
    </div>

    <div class="sh-actions">
      <button id="form-submit" class="lets-go-btn">
        <img src="/img/letsgo.png" alt="Allons-y">
      </button>
    </div>

    <footer>
      <img src="/img/stripes.png" class="sh-background full-size">
    </footer>
  </template>
  <template style="display: none" id="welcome">
    <header>
        <h1 class="text-red">Bienvenue à toi<br>jeune recrue</h1>
    </header>

    <div class="sh-mission">
      <p>Félicitations <span data-local-storage data-property="innerHTML" data-key="name"></span> !</p>
      <p>Vous venez de rejoindre la grande famille des super-héros qui se battent contre le covid-19.</p>
      <p>Votre mission si vous l'acceptez est de nous aider à sauver des vies !</p>
      <p>Mais avant cela nous vous proposons de tester vos aptitudes physiques afin de vous affilier à votre équipe !</p>
    </div>

    <footer>
        <div class="text-right">
            <a href="#capacity" class="sh-btn-image sh-btn-arrow btn-blue" style="margin-right: 1em;">Commencer le test</a>
        </div>
      <img src="/img/lines.png" class="sh-background full-size">
    </footer>
  </template>
  <template style="display: none" id="capacity">
      <h2 class="text-blue text-center">Comment sont<br>vos super pouvoirs ?</h2>
      <div class="sh-actions">
          <button class="text-center lets-go-btn" id="fever">
              <img src="img/4-pouvoirs/fievre.png" alt="Fièvre" class="centered block">
              <span class="text-blue">J'ai de la fièvre</span>
          </button>
          <button class="text-center lets-go-btn" id="cough">
              <img src="img/4-pouvoirs/toux.png" alt="Toux" class="centered block">
              <span class="text-blue">J'ai une toux</span>
          </button>
          <button class="text-center lets-go-btn" id="fine">
              <img src="img/4-pouvoirs/bon.png" alt="Normal" class="centered block">
              <span class="text-blue">Je suis en forme</span>
          </button>
      </div>

      <footer>
          <div class="text-right">
              <button id="setTeam" style="margin-right: 1em;"><img src="/img/arrow-right-white.png" class="not-100pc" style="height: 35px"></button>
          </div>
      </footer>
  </template>
  <template style="display: none" id="welcomeTeam">
      <header>
          <h1 class="text-blue">Bienvenue !</h1>
      </header>

      <div class="mask-wrapper text-center">
          <div><img class="colored-mask"></div>
          <h2 class="text-blue">L'équipe <span class="text-color-team"></span><br>est fière de vous accueillir !</h2>
      </div>

      <footer>
          <div class="text-right">
              <a href="#gain" style="margin-right: 1em;margin-bottom: 1em;"><img src="/img/arrow-right-white.png" class="not-100pc"></a>
          </div>
      </footer>
  </template>
  <template style="display: none" id="gain">
      <div class="radial-gradient">
        <header>
            <h1 class="text-white">Félicitations</h1>
        </header>

        <div class="badge-wrapper">
            <img src="/img/6-gain/flash.png" alt="flash"/>
            <img class="colored-badge" alt="badge"/>
        </div>
        <div class="content text-center">
            <h2>Nouvelle récompense</h2>
            <p>Vous venez de remporter une nouvelle récompense ! Retrouvez-là dans le panneau récompense de votre tableau de bord.</p>
        </div>

        <footer>
            <div class="text-right">
                <a href="#dashboard" style="margin-right: 1em;margin-bottom: 1em;"><img src="/img/arrow-right-white.png" class="not-100pc"></a>
            </div>
        </footer>
      </div>
  </template>
  <template style="display: none" id="dashboard">
    <div class="hero-name-separator">
        <div class="content text-center">
            <img class="colored-profile">
            <h2 data-local-storage data-property="innerHTML" data-key="name"></h2>
            <p>Jeune recrue</p>
        </div>
    </div>

      <div class="sh-actions">
          <a href="#soon" class="text-blue text-center"><img class="colored-reward"><br>Récompenses</a>
          <a href="#soon" class="text-blue text-center"><img class="colored-trophy"><br>Trophées</a>
      </div>

      <footer class="sh-background">
          <a href="#challenge" class="sh-btn bg-color-team text-center">Défis quotidiens en cours</a><br>
          <a href="#tasks" class="sh-btn btn-blue text-center">Nouveaux défis</a><br><br>
      </footer>
  </template>
  <template style="display: none" id="challenge">
      <h2 class="text-blue text-center">Choisissez votre prochain défi</h2>
      <div class="tasks">
          <input type="text" class="task text-center red-form">
          <input type="text" class="task text-center red-form">
          <input type="text" class="task text-center red-form">
      </div>

      <span class="tasks-action">Valider</span>

    </template>
    <template style="display: none" id="soon">
        <header>
            <img src="/img/logo.png" alt="Logo" class="sh-logo">
        </header>
  
        <div class="text-center">
            <h1>Bientôt !</h1>
            <h2 class="text-color-team">Restez chez vous!</h2>
            <h2 class="hidden visible-blue text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>80 hospitalisations</li><li>40 réanimations</li><li>et 8 décès.</li></ul></h2>
            <h2 class="hidden visible-yellow text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>100 hospitalisations</li><li>50 réanimations</li><li>et 12 décès.</li></ul></h2>
            <h2 class="hidden visible-orange text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>100 hospitalisations</li><li>50 réanimations</li><li>et 12 décès.</li></ul></h2>
            <h2 class="hidden visible-red text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>120 hospitalisations</li><li>60 réanimations</li><li>et 16 décès.</li></ul></h2>
        </div>
    </template>
  <template style="display: none" id="tasks">
    <h2 class="text-blue text-center">Vos défis en cours</h2>
    <div class="task">
        <span class="label" data-local-storage data-property="innerHTML" data-key="taskone"></span>
        <span class="action">Valider le défi</span>
        <span class="action">Annuler</span>
    </div>
    <div class="task">
        <span class="label" data-local-storage data-property="innerHTML" data-key="tasktwo"></span>
        <span class="action">Valider le défi</span>
        <span class="action">Annuler</span>
    </div>
    <div class="task">
        <span class="label" data-local-storage data-property="innerHTML" data-key="taskthree"></span>
        <span class="action">Valider le défi</span>
        <span class="action">Annuler</span>
    </div>
  </template>
  <template style="display: none" id="soon">
      <header>
          <img src="/img/logo.png" alt="Logo" class="sh-logo">
      </header>

      <div class="text-center">
          <h1>Bientôt !</h1>
          <h2 class="text-color-team">Restez chez vous!</h2>
          <h2 class="hidden visible-blue text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>80 hospitalisations</li><li>40 réanimations</li><li>et 8 décès.</li></ul></h2>
          <h2 class="hidden visible-yellow text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>100 hospitalisations</li><li>50 réanimations</li><li>et 12 décès.</li></ul></h2>
          <h2 class="hidden visible-orange text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>100 hospitalisations</li><li>50 réanimations</li><li>et 12 décès.</li></ul></h2>
          <h2 class="hidden visible-red text-color-team">Vous  éviterez  potentiellement:<ul style="padding-left:0;list-style: none"><li>120 hospitalisations</li><li>60 réanimations</li><li>et 16 décès.</li></ul></h2>
      </div>
  </template>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="/js/pages/404.js"></script>
  <script src="/js/pages/home.js"></script>
  <script src="/js/pages/register.js"></script>
  <script src="/js/pages/welcome.js"></script>
  <script src="/js/pages/capacity.js"></script>
  <script src="/js/pages/gain.js"></script>
  <script src="/js/pages/tasks.js"></script>
  <script src="/js/pages/challenge.js"></script>
  <script src="/js/pages/welcomeTeam.js"></script>
  <script src="/js/pages/dashboard.js"></script>
  <script src="/js/pages/soon.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/rlite-router/2.0.3/rlite.min.js" integrity="sha256-AuYI0PQIoQomeRivOr1FWcoJNQXdjT8ek5PUsykpuWQ=" crossorigin="anonymous"></script>
  <script>
    var $main = $('.main');
    var $body = $('body');
    route = Rlite(Pages.notFound, {
      // Default route
      '': Pages.home,

      'register': Pages.register,
      'welcome': Pages.welcome,
      'capacity': Pages.capacity,
      'welcomeTeam': Pages.welcomeTeam,
      'gain': Pages.gain,
      'tasks': Pages.tasks,
      'challenge': Pages.challenge,
      'dashboard': Pages.dashboard,
      'soon': Pages.soon,
    });

    // Hash-based routing
    function processHash() {
      const hash = location.hash || '#';

      $body.attr('class','');
      // Do something useful with the result of the route
      route(hash.slice(1));
      $main.find('[data-local-storage]').each(function() {
        var $this = $(this);
        this[$(this).data('property')] = localStorage.getItem($this.data('key'));
      })
    }

    function teamNeeded() {
      var team = localStorage.getItem('team');
      if(!team || -1 === ['blue','yellow','orange','pink'].indexOf(team)) {
        document.location.hash='welcome';
        return;
      }

      $body.attr('data-team',team);
      return team
    }

    function getTeamName(feminine, plural) {
      var team = teamNeeded();

      var teams = {
        pink: {
          masculine: 'rose',
          feminine: 'rose',
          masculinePlural: 'roses',
          femininePlural: 'roses'
        },
        yellow: {
          masculine: 'jaune',
          feminine: 'jaune',
          masculinePlural: 'jaunes',
          femininePlural: 'jaunes'
        },
        blue: {
          masculine: 'bleu',
          feminine: 'bleue',
          masculinePlural: 'bleus',
          femininePlural: 'bleues'
        },
        orange: {
          masculine: 'orange',
          feminine: 'orange',
          masculinePlural: 'oranges',
          femininePlural: 'oranges'
        },
      };

      if(feminine) {
        if(plural) {
          return teams[team].femininePlural;
        } else {
          return teams[team].feminine;
        }
      } else {
        if(plural) {
          return teams[team].masculinePlural;
        } else {
          return teams[team].masculine;
        }
      }
    }
    function ucFirst(str) {
      if (str.length > 0) {
        return str[0].toUpperCase() + str.substring(1);
      } else {
        return str;
      }
    }

    window.addEventListener('hashchange', processHash);
    processHash();
  </script>
</body>
</html>
